# doc_checker_bot

Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

## –í–∞–∂–Ω–æ

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω —Å –Ω—É–ª—è ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –Ω–æ–≤–æ–º—É –¢–ó.**

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **bot/** ‚Äî Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø—Ä–∏—ë–º —Ñ–∞–π–ª–æ–≤, –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–æ–º–∞–Ω–¥—ã –æ—Ç—á—ë—Ç–æ–≤
- **extractor/** ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π
- **storage/** ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –±–∏–∑–Ω–µ—Å-—Ü–µ–ø–æ—á–∫–∏
- **analytics/** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º –∏ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- **classifier/** ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–¥–æ–≥–æ–≤–æ—Ä, —Å—á—ë—Ç, –∞–∫—Ç, –Ω–∞–∫–ª–∞–¥–Ω–∞—è, –≤—ã–ø–∏—Å–∫–∞)
- **legality_check/** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫–æ–Ω–Ω–æ—Å—Ç–∏ —Å–¥–µ–ª–∫–∏ (–µ—Å—Ç—å –ª–∏ –¥–µ–π—Å—Ç–≤—É—é—â–∏–π –¥–æ–≥–æ–≤–æ—Ä)
- **rag_engine/** ‚Äî –ø–æ–∏—Å–∫ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º —Å –ø–æ–º–æ—â—å—é FAISS (Retrieval-Augmented Generation)
- **closure_check/** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –±–∏–∑–Ω–µ—Å-—Ü–µ–ø–æ—á–∫–∞–º

## –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ Telegram-–±–æ—Ç–∞
2. –°–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (PDF/DOCX/JPG)
3. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–¥–æ–≥–æ–≤–æ—Ä/—Å—á—ë—Ç/–∞–∫—Ç/–Ω–∞–∫–ª–∞–¥–Ω–∞—è/–£–ü–î)
4. LLM –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è (–ò–ù–ù, –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç, —Å—É–º–º–∞, –¥–∞—Ç–∞, –Ω–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞)
5. –î–æ–∫—É–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –±–∏–∑–Ω–µ—Å-—Ü–µ–ø–æ—á–∫–∏ (–¥–æ–≥–æ–≤–æ—Ä ‚Üí —Å—á–µ—Ç–∞ ‚Üí –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã)
7. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
8. –î–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º –∏ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–º —Ü–µ–ø–æ—á–∫–∞–º

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.11+
- aiogram, pdfplumber, pytesseract, doctr, faiss, peewee, pandas, openpyxl, sentence-transformers
- PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- Docker –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç (PDF, JPG, DOCX, XLSX, ZIP) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –û—Ç—á—ë—Ç—ã
- `/report` ‚Äî –æ–±—â–∏–π –æ—Ç—á—ë—Ç –ø–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º
- `/report <–∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç>` ‚Äî –æ—Ç—á—ë—Ç –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É
- `/unclosed` ‚Äî –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ –±–∏–∑–Ω–µ—Å-—Ü–µ–ø–æ—á–∫–∏
- `/monthly [–≥–æ–¥ –º–µ—Å—è—Ü]` ‚Äî –º–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç
- `/chain <–Ω–æ–º–µ—Ä_–¥–æ–≥–æ–≤–æ—Ä–∞>` ‚Äî –¥–µ—Ç–∞–ª–∏ –±–∏–∑–Ω–µ—Å-—Ü–µ–ø–æ—á–∫–∏

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥
```
/report –û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞
/chain –î-2024-001
/monthly 2024 12
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

–î–æ–∫—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ:
```
data/documents/
‚îú‚îÄ‚îÄ –¥–æ–≥–æ–≤–æ—Ä—ã/
‚îÇ   ‚îî‚îÄ‚îÄ –û–û–û –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç/
‚îÇ       ‚îî‚îÄ‚îÄ 20241201_143022_–¥–æ–≥–æ–≤–æ—Ä.pdf
‚îú‚îÄ‚îÄ —Å—á–µ—Ç–∞/
‚îÇ   ‚îî‚îÄ‚îÄ –û–û–û –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç/
‚îÇ       ‚îî‚îÄ‚îÄ 20241201_143025_—Å—á–µ—Ç.pdf
‚îú‚îÄ‚îÄ –∞–∫—Ç—ã/
‚îú‚îÄ‚îÄ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ/
‚îú‚îÄ‚îÄ —Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä—ã/
‚îú‚îÄ‚îÄ —É–ø–¥/
‚îú‚îÄ‚îÄ –≤—ã–ø–∏—Å–∫–∏/
‚îî‚îÄ‚îÄ –∏–Ω—ã–µ/
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **documents** ‚Äî –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **counterparties** ‚Äî –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **business_chains** ‚Äî –±–∏–∑–Ω–µ—Å-—Ü–µ–ø–æ—á–∫–∏ (–¥–æ–≥–æ–≤–æ—Ä ‚Üí —Å—á–µ—Ç–∞ ‚Üí –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- **chain_links** ‚Äî —Å–≤—è–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ü–µ–ø–æ—á–∫–∞—Ö
- **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç—á—ë—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–ò–Ω–¥–µ–∫—Å—ã** ‚Äî –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤

–î–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç—á—ë—Ç–æ–≤ –≤ Excel/CSV –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
python export_reports.py --type counterparties --format excel
python export_reports.py --type unclosed --format csv
python export_reports.py --type monthly --year 2024 --month 12
```

## –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞

```
üìÑ –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è '—Å—á–µ—Ç.pdf':
{
  'doc_type': '—Å—á–µ—Ç',
  'counterparty': '–û–û–û "–°–∏–≥–º–∞"',
  'inn': '7701456789',
  'doc_number': '123',
  'date': '2024-07-10',
  'amount': 150000.0,
  'subject': '–ü–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤',
  'contract_number': '–î-2024-001'
}
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –±–∞–∑–µ (ID: 42)
``` 

–∞ —Ç–∞–∫?